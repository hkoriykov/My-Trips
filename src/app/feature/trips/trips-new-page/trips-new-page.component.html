<div class="container">
  <h1>Add new trip</h1>
  <form #tripForm="ngForm" (ngSubmit)="addTrip()">
    <div class="form-group mb-3">
      <label for="name">Destination name</label>
      <input #destinationName="ngModel" name="destinationName" ngModel type="text" class="form-control"
        id="destinationName" required minlength="3">

      <ng-container *ngIf="destinationName.touched && destinationName.invalid">
        <div *ngIf="destinationName.errors?.['required']" class="alert alert-danger">
          Destination Name is required!
        </div>
        <div *ngIf="destinationName.errors?.['minlength']" class="alert alert-danger">
          Destination Name must be at least 3 characters long!
        </div>
      </ng-container>
    </div>
    <div class="form-group mb-3">
      <label for="localCurrency">Local currency</label>
      <input #localCurrency="ngModel" name="localCurrency" ngModel type="text" class="form-control" id="localCurrency"
        required minlength="2">

      <ng-container *ngIf="localCurrency.touched && localCurrency.invalid">
        <div *ngIf="localCurrency.errors?.['required']" class="alert alert-danger">
          Local Currency is required!
        </div>
        <div *ngIf="localCurrency.errors?.['minlength']" class="alert alert-danger">
          Local Currency must be at least 2 characters long!
        </div>
      </ng-container>
    </div>


    <div class="form-group mb-3">
      <label class="form-label" for="image">Destination image</label>

      <div class="row align-items-start">
        <div class="col">
          <input #imageUrl="ngModel" name="imageUrl" ngModel type="file" class="form-control" id="imageUrl" required
            (change)="selectFile($event)" />
        </div>
        <div class="col">
          <button class="btn btn-outline-success btn-sm mt-0 ms-1 w-25" [disabled]="!selectedFiles" (click)="upload()">
            Upload
          </button>
        </div>
      </div>

      <div *ngIf="currentFileUpload" class="progress mt-2">
        <div class="progress-bar progress-bar-info" role="progressbar" attr.aria-valuenow="{{ percentage }}"
          aria-valuemin="0" aria-valuemax="100" [ngStyle]="{ width: percentage + '%' }">
          {{ percentage }}%
        </div>
      </div>

    </div>

    <div>
      <p class="text-danger">{{errorMessage}}</p>
    </div>

    <div class="row mt-5">
      <button (click)="navigateToHome()" class="btn btn-outline-secondary btn-sm w-25">Cancel</button>
      <button [disabled]="tripForm.invalid" type="submit" class="btn btn-outline-success btn-sm w-25">Add</button>
    </div>

  </form>
</div>